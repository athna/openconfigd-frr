# FRRd

`frrd` is openconfigd configuration gateway to frr.
This is based on `coreswitch/openconfigd/quagga`.

```
$ go get github.com/coreswitch/openconfigd/openconfigd
$ go get github.com/slankdev/frr/frrd
```

initial config frr
```
$ cat /etc/frr/bgpd.conf
hostname bgpd
password zebra
log stdout
$ cat /etc/frr/ospfd.conf
hostname ospfd
password zebra
log stdout
$ cat /etc/frr/zebra.conf
hostname Router
password zebra
enable password zebra
$ cat /etc/frr/daemons
zebra=yes
bgpd=yes
ospfd=yes
ospf6d=no
ripd=no
ripngd=no
isisd=no
pimd=no
ldpd=no
nhrpd=no
eigrpd=no
babeld=no
sharpd=no
pbrd=no
$ cat /etc/frr/daemons.conf
vtysh_enable=yes
zebra_options="  -s 90000000 --daemon -A 127.0.0.1"
bgpd_options="   --daemon -A 127.0.0.1"
ospfd_options="  --daemon -A 127.0.0.1"
ospf6d_options=" --daemon -A ::1"
ripd_options="   --daemon -A 127.0.0.1"
ripngd_options=" --daemon -A ::1"
isisd_options="  --daemon -A 127.0.0.1"
pimd_options="  --daemon -A 127.0.0.1"
ldpd_options="  --daemon -A 127.0.0.1"
nhrpd_options="  --daemon -A 127.0.0.1"
eigrpd_options="  --daemon -A 127.0.0.1"
babeld_options="  --daemon -A 127.0.0.1"
sharpd_options="  --daemon -A 127.0.0.1"
pbrd_options="  --daemon -A 127.0.0.1"

# The list of daemons to watch is automatically generated by the init script.
watchfrr_enable=yes
watchfrr_options=(-d -r /usr/sbin/servicebBfrrbBrestartbB%s -s /usr/sbin/servicebBfrrbBstartbB%s -k /usr/sbin/servicebBfrrbBstopbB%s -b bB)

# If valgrind_enable is 'yes' the frr daemons will be started via valgrind.
# The use case for doing so is tracking down memory leaks, etc in frr.
valgrind_enable=no
valgrind=/usr/bin/valgrind
```

```
$ cd $GOPATH/bin
$ sudo sytemctl start frr  // start zebra,bgpd and ospfd.
$ sudo $GOPATH/bin/openconfigd -y $GOPATH/src/github.com/coreswitch/openconfigd/yang
$ sudo $GOPATH/bin/frrd
```


## System Architecture

```
        +---------+
        | cli_cmd +------+
        +----+----+      |
             |           |
          (gRPC)      (gRPC)
             |           |
      +------+------+    |
      | Openconfigd |    |
      +------+------+    |
             |           |
          (gRPC)         |
             |           |
         +---+--+        |
         | FRRd +--------+
         +------+
             |
   (zapi/socket/netlink)
             |
       +-----+-----+
       | Linux FIB |
       +-----------+
```


